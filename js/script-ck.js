/***************
     Vars
***************/var hiddenVariables=["$.fn.autocomplete","$.fn.tooltip","$.fn.tabs","$.widget","$.fn.button","$.fn.mouse","$.fn.menu","$.position","$.fn._focus","$.fn._show","$.fn._hide","$.fn._addClass","$.fn._removeClass","$.fn._toggleClass","$.fn.__toggle","$.fn.selectable","$.fn.progressbar","$.fn.buttonset","$.effects","$.fn.effect","$.fn.draggable","$.fn.droppable","$.fn.datepicker","$.datepicker","$.fn.dialog","$.fn.slider","$.fn.sortable","$.fn.resizable","$.fn.accordion","$.fn.scrollParent","$.fn.uniqueId","$.fn.removeUniqueId","$.fn.focus","$.fn.disableSelection","$.fn.enableSelection","$.fn.zIndex","$.fn.toggleClass","$.fn.switchClass","$.fn.cssUnit","$.data","$.focusable","$.tabbable","$.Widget","$.fn.propAttr","$.fieldValue","$.fn.fieldValue","$.fn.ajaxSubmit","$.fn.formToArray","$.fn.ajaxFormUnbind","$.fn.clearForm","$.fn.formSerialize","$.fn.fieldSerialize","$.fn.enable","$.fn.clearInputs","$.fn.clearFields","$.fn.resetForm","GSearchForm","GwebSearch","GcustomwebSearch","GbookSearch","GblogSearch","GvideoSearch","GnewsSearch","GlocalSearch","GcustomimageSearch","GpatentSearch","GSearchControl","GsearcherOptions","GdrawOptions","GimageSearch","CreativeToolset","CreativeToolsetProxy","ExpandableAdSlotFactory","DhtmlExpandableIframeFactory","GPT_jstiming","GA_jstiming","ToolbarApi","DEBUG","Analytics","Fx","Try","Chain","Selectors","Class","Form","Window","Events","Elements","Options","Type","Toggle","Position","Browser","Asset","Field","Insertion","Color","Request","Tips","Group","Effect","Native","Builder","Control","Locale","Table","Ease","Strong","Power4","Quint","Power3","Quart","Power2","Cubic","Quad","Power1","Linear","Power0","Back","BackOut","BackIn","BackInOut","SlowMo","BounceOut","BounceIn","SteppedEase","BounceInOut","Bounce","CircOut","CircIn","CircInOut","CSSPlugin","Circ","ElasticOut","ElasticIn","ElasticInOut","Elastic","ExpoOut","ExpoIn","ExpoInOut","Expo","SineOut","RoughEase","SineIn","Sine","SineInOut","EaseLookup","IframeBase","Iframe","IFrame","IframeProxy","IframeWindow"],hiddenVariableGroups=/^(Goog_.+|G(A|S)_google.+|WebForm_.+|WR[A-z]{1,2}|ClickTale[A-z]+|BAIDU_[A-z]+|\$(\.fn)?\.wpcf7[A-z].+|Sys\$[A-z].+|[A-Z][0-9]{1,2}|[A-z]$|[A-Z][a-z]$)/,$html=$("html"),$body=$("body"),$bigError=$("#body-bigError"),$bigCount=$("#body-bigCount"),$header_code=$("#header-code"),$header_code_object=$("#header-code-object"),$header_code_property=$("#header-code-property"),$header_logo=$("#header-logo"),$header_logo_o=$("#header-logo o"),$main=$("main"),$slogan=$("#slogan"),$subSlogan=$("#subSlogan"),$data=$("#data"),$data_table=$("#data table"),$data_cols=$("#data_cols"),$data_scroll=$("#data_scroll"),$about=$("#about"),$sectionHeader_search=$("#sectionHeader--search"),$search_=$("#search_"),$search=$("#search"),$searchSymbols=$("#searchSymbols"),$queryButtons=$("#queryButtons span"),$howTo=$("#howTo"),$footer=$("footer"),$subscribe_=$("#subscribe_"),$subscribe=$("#subscribe"),$searchWrap=$("#searchWrap");$(window).on("mousewheel",function(e){$data_table[0].scrollTop+=e.originalEvent.deltaY/2;$data_scroll.filter(":visible").velocity("transition.fadeOut")});$body.on("mousedown",function(e){var t=e.target,n=t.getAttribute("data-query");if(t.href){e.preventDefault();window.open(t.href)}if(n!==null){var r=n||$(t).text();for(var i=0;i<r.length;i++)(function(e){setTimeout(function(){$search.val(r.slice(0,e+1));e===r.length-1&&setTimeout(function(){UI.query($search[0])},75)},e*(18-Math.min(12,r.length))*3)})(i);$.Velocity(t,"callout.pulse",250)}});$search.one("mouseup",function(){$search.select()});$subscribe.one("mouseup",function(){$subscribe.val("email@domain.com").select()});$data_scroll.one("mousedown",function(){$data_table[0].scrollTop+=50;$data_scroll.velocity("transition.slideDownBigOut")});var UI={loading:!1,showCount:function(){$.Velocity.RunSequence([{elements:$bigCount,properties:{color:"#2eca3f"},options:{duration:1}},{elements:$bigCount,properties:"transition.vanishBottomIn",options:{duration:225}},{elements:$bigCount,properties:"callout.flicker.text"},{elements:$bigCount,properties:{opacity:.05},options:{delay:250,duration:750}},{elements:$bigCount,properties:{color:"#000000"},options:{duration:550}}])},hideCount:function(){$.Velocity.RunSequence([{elements:$bigCount,properties:"transition.fadeOut",options:{duration:575}}])},error:function(){$body.velocity("stop",!0);$.Velocity.RunSequence([{elements:$search_,properties:"callout.shake",options:{duration:375,sequenceQueue:!1}},{elements:$body,properties:{borderColor:"#ff0000"},options:{sequenceQueue:!1,duration:400}},{elements:$bigError,properties:"transition.fadeIn",options:{sequenceQueue:!1,duration:225}},{elements:$bigError,properties:"transition.fadeOut",options:{duration:300}},{elements:$body,properties:"reverse",options:{sequenceQueue:!1,duration:500}}])},query:function(){function t(e,t){function i(e){UI.loading=!0;$html.css("cursor","wait");$.ajax({url:n.hostname+e,dataType:"json",complete:function(){UI.loading=!1;$html.css("cursor","default")},success:function(e){e&&e.meta?t(e):UI.error()},error:UI.error})}var n={hostname:"http://107.170.240.125/v1/",librariesPath:"libraries/",sitesPath:"sites/",scriptsPath:"scripts/"},r;/\.js$/.test(e)&&alert("Be careful: We noticed you suffixed your search query with '.js'. Instead, you need to enter the exact case-sensitive VARIABLE that a library exposes itself under -- not simply the name of the library.");e=$.trim(e.replace(/^(^https?:\/\/)?(www\.)?/i,"").replace(/^jQuery\./i,"$.").replace(/\.js$/i,""));if(e==="jquery"||e==="$"){e==="jquery"&&alert("Be careful: Variable lookup is case sensitive. We've gone ahead and turned 'jquery' into 'jQuery' for you. Remember that you need to enter the exact case-sensitive VARIABLE that a library epxoses itself under -- not simply the name of the library.");e="jQuery"}$search.val(e);window.location.hash=e;if(/^[-A-z0-9]+\.[-A-z0-9]+$/.test(e)){r="site";e=e.toLowerCase()}else if(/^script: ?[-A-z0-9]+/.test(e)){r="script";e=e.replace(/^script: */,"").toLowerCase()}else r=e;e==="libscore.com"&&alert("OMG. RECURSION!!@#!KJ$K BRAIN EXPLOSION. AHAHAHAHAHAHHHHHHH\n\nJust kidding. Let's pull some data from you.");switch(r){case"site":UI.requestTarget="site";i(n.sitesPath+e+"/?");break;case"*.*":UI.requestTarget="sites";i(n.sitesPath+"?limit=1000");break;case"script":UI.requestTarget="script";i(n.scriptsPath+e+"?limit=1000");break;case"script:*":UI.requestTarget="scripts";i(n.scriptsPath+"?limit=1000");break;case"*":UI.requestTarget="libs";i(n.librariesPath+"?limit=1500");break;default:UI.requestTarget="lib";i(n.librariesPath+e+"?limit=1000")}}function n(e,t){var n=e,r=!1;if(e.length>40){r=!0;n=n.slice(0,37)}n=n.replace(/\./g,"<span class='accent'>.</span>");r&&(n="<span title='"+e+"'>"+n+"…</span>");t==="mobile"&&(n+=" <span title='Appears on the mobile version of this site.' class='accent'>[mobile]</span>");return n}function r(e,t){var n=numeral(e).format("0,0").replace(/,/g,"<span class='accent'>,</span>");t===!0&&(n="<span class='text-grey'>#</span>"+n);return n}var e=$search.val();if(!$("body").hasClass("results")){$searchWrap.velocity({properties:"transition.slideDownBigOut",options:{duration:250}});setTimeout(function(){$("body").addClass("results")},600);$.Velocity.RunSequence([{elements:$footer,properties:"transition.fadeOut",options:{duration:500}},{elements:$body,properties:{backgroundColor:"#F7F7F7"},options:{sequenceQueue:!1,duration:400}},{elements:$searchWrap,properties:"transition.slideLeftBigIn",options:{delay:600,duration:250}},{elements:$footer,properties:"transition.fadeIn",options:{duration:500}}])}(function s(){var e=["□","◅","◇","○"];e.forEach(function(t,n){$.Velocity($searchSymbols,"reverse");$.Velocity($searchSymbols,{opacity:[0,"easeInOutsine"],color:"#29BD66",scale:2-n/20},{duration:300,easing:"linear",begin:function(){$searchSymbols.html(t)},complete:function(){if(UI.loading===!1){$search.velocity({scaleX:["100%","easeInOutCirc"],opacity:[1,"linear"]},{sequenceQueue:!1,duration:350});$.Velocity.RunSequence([{elements:$body,properties:{borderColor:"#000"},options:{queue:!1}},{elements:$sectionHeader_search,properties:{opacity:1},options:{duration:700}}])}else n===e.length-1&&s()}})})})();$("#header-logo").on("click",function(){if($("body").hasClass("results")){setTimeout(function(){$("body").removeClass("results")},500);$.Velocity.RunSequence([{elements:$footer,properties:"transition.fadeOut",options:{duration:500}},{elements:$searchWrap,properties:"transition.slideLeftBigOut",options:{sequenceQueue:!1,duration:250}},{elements:$body,properties:{backgroundColor:"#FFFFFF"},options:{sequenceQueue:!1,duration:400}},{elements:$footer,properties:"transition.fadeIn",options:{duration:500}},{elements:$searchWrap,properties:"transition.slideUpBigIn",options:{delay:300,duration:250}}])}});var i;t(e,function(e){var t="",s;e.scripts&&(e.libraries=e.libraries.concat(e.scripts.map(function(e){e.name="script:"+e.name;return e})));i=e.results||e.sites||e.libraries;i.forEach(function(i){var o;if(hiddenVariables.indexOf(i.library||i.name)!==-1||hiddenVariableGroups.test(i.library||i.name))return;switch(UI.requestTarget){case"site":s="<div>library</div><div>site count</div>";var u=/^script:/.test(i.name);if(u)o="<td><a href='//"+i.name.replace(/^script:/,"")+"'>"+n(i.name,i.type)+"</a> <span class='text-blue'>⬈</span></td>";else{o="<td><a href='//"+(i.github?"github.com/"+i.github:"github.com/julianshapiro/libscore/issues/1")+"'>"+n(i.name,i.type);o+=" <span class='text-blue'>"+(i.github?"⬈":"<span class='hint' data-hint='Click to help track down this library.'>?</span>")+"</span></a>"}o+="<td>"+r(i.count)+"</td>";break;case"sites":s="<div>site</div><div>site rank</div>";o="<td><span data-query='"+i.url+"'>"+n(i.url)+"</span> <span class='text-green'>→</span></td>";o+="<td>"+r(i.rank,!0)+"</td>";break;case"lib":s="<div><span id='data_badge'>"+r(e.count)+"</span> sites <a href='http://107.170.240.125/badge/"+$search.val()+".svg'>Get badge</a></div></div><div>site rank</div>";o="<td><a href='//"+i.url+"'>"+n(i.url)+" <span class='text-blue'>⬈</span></a></td>";o+="<td>"+r(i.rank,!0)+"</td>";break;case"libs":s="<div>library <a href='https://107.170.240.125/libraries.txt'>Download list</a></div><div>site count</div>";o="<td><a href='//"+(i.github?"github.com/"+i.github:"github.com/julianshapiro/libscore/issues/1")+"'>"+n(i.library)+" <span class='text-blue'>"+(i.github?"⬈":"<span class='hint' data-hint='Click to help track down this library.'>?</span>")+"</span></a>";o+="<td>"+r(i.count)+"</td>";break;case"script":s="<div>"+r(e.count)+" sites</div><div>site rank</div>";o="<td><a href='//"+i.url+"'>"+n(i.url)+" <span class='text-blue'>⬈</span></a></td>";o+="<td>"+r(i.rank,!0)+"</td>";break;case"scripts":s="<div>script</div><div>site count</div>";o="<td><span data-query='script:"+i.script+"'>"+n(i.script)+"</span> <span class='text-green'>→</span></td>";o+="<td>"+r(i.count)+"</td>"}t+="<tr>"+o+"</tr>"});switch(UI.requestTarget){case"lib":$bigCount.html(r(e.count));UI.showCount();break;default:UI.hideCount()}$data_table.css("opacity",0)[0].scrollTop=0;if(t){$data_cols.html(s);$data_table.html(t)}else{$data_cols.html("<div>library</div><div>site count</div>");$data_table.html("<tr><td class='text-red'>No libraries or scripts were detected on this site.</td><td class='text-red'>Ø</td></tr>")}$.Velocity.RunSequence([{elements:$data_cols.find("div"),properties:"transition.glitchIn"},{elements:$data_table,properties:"transition.vanishBottomIn",options:{sequenceQueue:!1,display:"block",duration:475,complete:function(){if($data_table[0].scrollHeight>$data_table.height()){$data_scroll.velocity("stop",!0).velocity("transition.fadeIn",850);i.length>900&&$data_table.append("<tr id='data_more'><td>Results after 1,000 are not shown. Query our <a href='https://github.com/julianshapiro/libscore'>API</a> for a complete list.</td><td></td></tr>")}else $data_scroll.css("opacity",0)}}},{elements:$subscribe_.filter(":hidden"),properties:"transition.glitchIn",options:{delay:4500,duration:300}},{elements:$subscribe.filter(":hidden"),properties:"transition.glitchIn",options:{delay:25,duration:300}}])})}};localStorage.getItem("subscribed")==="true"&&$subscribe.remove();$("input").on("keydown",function(e){if(e.keyCode===13&&this.value!=="")if(this.id==="search"&&this.value!=="variable (case sensitive) or domain...")UI.query(e.target);else if(this.id==="subscribe"&this.value!=="email@domain.com"){localStorage.setItem("subscribed","true");$subscribe_.submit();$subscribe.remove()}});$.Velocity.hook($bigCount,"translateX","-50%");$(window).load(function(){$.Velocity.RunSequence([{elements:$header_logo,properties:"transition.fadeIn",options:{delay:100,duration:600}},{elements:$slogan,properties:"transition.fadeIn",options:{delay:400,duration:725,sequenceQueue:!1}},{elements:$search_,properties:"transition.clipBottomIn",options:{duration:725,sequenceQueue:!1}},{elements:$queryButtons,properties:"transition.slideUpIn",options:{duration:300,stagger:125}},{elements:$howTo,properties:"transition.clipBottomIn",options:{delay:500,duration:900,sequenceQueue:!1}},{elements:$header_logo_o,properties:{opacity:[.6,1]},options:{sequenceQueue:!1,duration:500,loop:2}},{elements:$header_code,properties:"transition.fadeIn",options:{sequenceQueue:!1,duration:500,begin:function(){var e=window.location.hash.slice(1);if(e){$search.attr("placeholder",e);UI.query()}else $search.attr("placeholder","variable (case sensitive) or domain...");["location()","hash()","map()","<a href='//medium.com/@Shapiro/be93165fa497'>About</a>"].forEach(function(e,t){$.Velocity($header_code_property,"transition.vanishBottomIn",{delay:t===0?125:0,duration:250,begin:function(){$header_code_property.html(e);t===1&&$header_code_object.html("Array.")},complete:function(){t===3&&$.Velocity.RunSequence([{elements:$header_code_object,properties:"transition.fadeOut",options:{duration:400}},{elements:$header_code_property,properties:"callout.pulse",options:{duration:650}}])}})})}}},{elements:$header_logo_o,properties:{opacity:.9,color:"#24A85A"},options:{duration:2e3,loop:!0}}])});$(window).on("scroll",function(){var e=$(window).scrollTop(),t=$("#query").offset().top+65,n=t-e;if(e>n){console.log("over!");$("#searchWrap").addClass("sticky");$("#data").addClass("sticky")}});